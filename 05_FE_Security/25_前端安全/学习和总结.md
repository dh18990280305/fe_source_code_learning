### 一、核心安全问题补充（点击劫持 / 中间人攻击 / 敏感数据泄露）
1. 点击劫持（Click Jacking）

*定义*

攻击者通过透明 iframe 嵌套目标网站，诱导用户点击「看似正常的按钮」，实则点击目标网站的敏感操作（如转账、删除、授权）。

*核心原理*
- 恶意页面用 iframe 嵌入目标网站（设为透明、全屏）；
- 恶意页面叠加诱导按钮，位置与目标网站敏感按钮重合；
- 用户点击诱导按钮 → 实际点击 iframe 内的敏感按钮。

*防御方案（面试必背）*
| 防御手段 | 实现方式 | 适用场景 |
| ---------- | ---------- | ----------- |
| X-Frame-Options 响应头 | 服务端设置：X-Frame-Options: DENY（禁止所有 iframe 嵌套）<br> X-Frame-Options: SAMEORIGIN（仅允许本站嵌套） | 全站防御，优先级最高 |
| CSP frame-src 限制 | frame-src 'self' 或 frame-src 'none'	 | 配合 X-Frame-Options，兜底防御 |
| JS 检测 iframe 嵌套 | ```js |  |
| if (top !== window) { // 检测是否被嵌套 | | |
| top.location = window.location; // 跳转到原页面 | | |


### 2. 中间人攻击（MITM）
#### 定义
攻击者拦截并篡改客户端与服务端之间的通信（如 WiFi 劫持、代理劫持），窃取/篡改数据（如账号密码、支付信息）。
#### 核心原理
- 客户端 ← 攻击者 ←→ 服务端（攻击者成为「中间人」）；
- 攻击者解密/篡改通信数据，再伪装成双方继续通信。
#### 前端防御方案
| 防御手段 | 实现方式 | 核心作用 |
|----------|----------|----------|
| 全站 HTTPS | 强制使用 HTTPS，配置 `Strict-Transport-Security (HSTS)` 响应头（强制浏览器用HTTPS） | 加密通信，防止数据被窃听/篡改 |
| 校验证书合法性 | 前端避免访问证书过期/无效的网站（浏览器自动校验，前端无需额外操作） | 防止攻击者伪造服务端证书 |
| 避免公共 WiFi 操作敏感功能 | 提示用户公共WiFi下不登录/支付（产品层面防御） | 降低被劫持风险 |

### 3. 敏感数据泄露防护
#### 定义
前端存储/传输的敏感数据（密码、手机号、token、支付信息）被窃取，是前端安全的高频漏洞。
#### 核心防御方案（按优先级排序）
1. **禁止本地存储敏感数据**：
   - 不将密码、token 存在 `localStorage/sessionStorage`（易被 XSS 窃取）；
   - 登录态优先用 `HttpOnly + Secure` Cookie 存储。
2. **数据传输加密**：
   - 敏感数据（如密码）前端加密后再传输（如 RSA 加密）；
   - 接口参数避免明文传输（如手机号不直接传 `13800138000`，可传加密串）。
3. **页面脱敏展示**：
   - 手机号：`138****8000`、身份证：`110***********1234`；
   - 密码输入框用 `<input type="password">`，禁止明文展示。
4. **避免 URL 携带敏感数据**：
   - 禁止将 token、手机号、订单号放在 URL 参数中（URL 会被日志/历史记录保存）；
   - 敏感接口用 POST 请求，而非 GET。
5. **清理敏感数据痕迹**：
   - 退出登录时清空 Cookie、本地存储，避免残留；
   - 敏感页面关闭后清理剪贴板数据（如支付页面）。

### 4. CSP 补充（核心作用强化）
#### 核心作用（面试标准答案）
1. **防 XSS**：通过白名单限制脚本/样式加载，禁止未知来源的恶意脚本执行；
2. **防点击劫持**：`frame-src 'none'` 禁止 iframe 嵌套；
3. **防数据泄露**：`connect-src` 限制接口请求域名，防止数据被发送到恶意地址；
4. **兜底防护**：即使前端存在漏洞，CSP 也能阻止攻击生效。

---

## 二、前端安全清单（可直接放入 05_Security）
```markdown
# 前端安全全清单（面试/项目通用）
## 一、XSS 防御
1. 输入校验：前后端双重过滤危险字符（< > " ' & javascript:）；
2. 输出转义：动态渲染内容必做 HTML 转义；
3. 禁用危险 API：少用 innerHTML/eval/document.write；
4. Cookie 防护：登录态设置 HttpOnly + Secure；
5. CSP 兜底：配置白名单限制资源加载。

## 二、CSRF 防御
1. CSRF Token 验证：前后端配合，请求携带 Token 并校验；
2. SameSite Cookie：配置 Lax/Strict，禁止跨站携带；
3. Referer/Origin 校验：辅助验证请求来源。

## 三、点击劫持防御
1. 服务端设置 X-Frame-Options: DENY/SAMEORIGIN；
2. CSP frame-src 限制：frame-src 'self'/'none'；
3. JS 检测 iframe 嵌套，被嵌套则跳转原页面。

## 四、中间人攻击防御
1. 全站 HTTPS，配置 HSTS 响应头；
2. 避免公共 WiFi 操作敏感功能；
3. 校验服务端证书合法性（浏览器自动完成）。

## 五、敏感数据泄露防护
1. 禁止 localStorage 存储密码/token，用 HttpOnly Cookie；
2. 敏感数据传输前加密（如 RSA 加密密码）；
3. 页面脱敏展示（手机号/身份证）；
4. 禁止 URL 携带敏感数据；
5. 退出登录清空所有敏感数据。

## 六、通用安全规范
1. 所有操作记录审计日志；
2. 敏感接口加频率限制（防暴力破解）；
3. 功能开关默认关闭，灰度上线；
4. 定期扫描前端漏洞（如 XSS、敏感数据泄露）。